/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package edu.duke.ece651.risc.client;

import edu.duke.ece651.risc.shared.Player;
import edu.duke.ece651.risc.shared.TextPlayer;

import java.io.*;
import java.net.Socket;
import java.util.Properties;

public class App {

    private Player player;

    public App(Player player) {
        this.player = player;
    }

    public static void main(String[] args) throws IOException {
        // load a properties file
        InputStream input = App.class.getClassLoader().getResourceAsStream("config.properties");
        Properties prop = new Properties();
        prop.load(input);

        // init socket
        String hostName = prop.getProperty("server.hostname");
        int portNumber = Integer.parseInt(prop.getProperty("server.port"));
        Socket s = new Socket(hostName, portNumber);

        Player player = new TextPlayer(new BufferedReader(new InputStreamReader(s.getInputStream())), new PrintWriter(s.getOutputStream(), true));
        player.sendMessage("test message from Player" + Integer.parseInt(player.recvMessage()));
        System.out.println(player.recvMessage());
        App app = new App(player);
        
        s.close();
    }

}
